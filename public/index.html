<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Chart me</title>

	<script src="vendor/d3/d3.v2.js"></script>
	<script src="vendor/jquery/jquery.js"></script>
	<script src="vendor/bootstrap/js/bootstrap-tooltip.js"></script>

	<script src="chartme.js"></script>

	<link rel="stylesheet" href="vendor/bootstrap/bootstrap/css/bootstrap.css">

	<style type="text/css">
		#bar-chart-2 {
			width: 600px;
			height: 300px;
		}

		#bar-chart-3 {
			width: 800px;
			height: 300px;
		}

		.chart {
			width: 800px;
			height: 300px;
		}

		.line {
			fill: none;
			stroke: steelblue;
			stroke-width: 1.5px;
		}

		.dot {
			fill: white;
			stroke: steelblue;
			stroke-width: 1.5px;
		}
/*
		.axis path, .axis line {
			fill: none;
			stroke: #000;
			shape-rendering: crispEdges;
		}
*/
		.line {
			stroke-width: 2px;
		}

		.guideline {
			stroke: #bbb;
			stroke-width: 1px;
			shape-rendering: crispEdges;
			display: none;
		}

		.axis {
			shape-rendering: crispEdges;
			stroke-dasharray: 1,2;
		}
		.axis text {
			font-size: 12px;
		}
		.axis path {
			display: none;
		}

		.y.axis .minor {
			stroke-opacity: .5;
		}
		.y.axis line, .x.axis line {
			stroke: #ddd;
		}
	</style>
</head>
<body>

	<div id="donut-chart"></div>
	<div id="line-chart"></div>
	<div id="bar-chart"></div>

	<div id="bar-chart-2" data-chart='{"type":"bar","data":[["20121001",4],["20121002",8],["20121003",20],["20121004",19],["20121005",12],["20121006",11],["20121007",0],["20121008",55],["20121009",4],["20121010",2],["20121011",45],["20121012",0],["20121013",15],["20121014",13],["20121015",8]]}'></div>

	<div id="bar-chart-3" data-chart='{"type":"bar","data":[["20121001","9"],["20121002","2"],["20121003","55"],["20121004","11"],["20121005",0],["20121006",0],["20121007",0],["20121008",0],["20121009",0],["20121010","0"],["20121011",0],["20121012",0],["20121013",0],["20121014",0],["20121015",0],["20121016",0]]}'></div>

	<div class="chart" data-chart='{"type":"donut","data":[["Fred Arnoux","1.20"],["Fred+1","3.11"],["Fred+2","29.15"]]}'></div>


	<div class="chart" data-chart='{"type":"bar","stack":true,"data":[["20121001","9","4"],["20121002","2","5"],["20121003","12","3"],["20121004","11","9"],["20121005",0,3],["20121006",2,0]]}'></div>


	<script type="text/javascript">
		var data1 = [
			 {value: 5, label: "ah"}
			,{value:8, label: "oh"}
			,{value:6, label: "hi"}
			,{value: 10, label: "yep"}
			,{value: 19, label: "hop"}
			,{value: 16, label: "tut"}
		];

		var data2 = [
			 {value: 5, label: "ah"}
			,{value:2, label: "oh"}
			,{value:11, label: "hi"}
			,{value: 6, label: "yep"}
			,{value: 15, label: "hop"}
			,{value: 18, label: "tut"}
			,{value: 10, label: "iii"}
		];

		var data = data1;

		var colors = {
				green: ["#ecf0d1", "#afc331"]
			, blue: ["#e6f6ff", "#98d8fd"]
			, purple: ["#e6cfec", "#9632b1"]
			, black: ["#cbcbcb", "#101010"]
		};

		var donut = chartme.donut(data)
			.colors(colors.green)
			;

		d3.select('#donut-chart').call(donut);

		var line = chartme.line(data);
		d3.select('#line-chart').call(line);

		var bar = chartme.bar(data)
			.colors(colors.purple)
			.x('label')
			.y('value');

		// d3.select('#bar-chart').call(bar);

		$('[data-chart]').each(function () {
			$(this).chartme();
		});



		d3.select(window).on("click", function() {
			data = data === data1 ? data2 : data1; // swap the data
			donut.update(data);
			bar.update(data);
		});



		// see http://stackoverflow.com/questions/10727892/how-to-center-the-bootstrap-tooltip-on-an-svg
		$("svg .bar").tooltip({
			  html: true
			, title: function () {
				var d = this.__data__
					, chart = d.chart;
				return '<b>' + d[1] + '</b><br>' + chart.xOutputFormat()(d[0]);
			}
		});


	</script>
</body>
</html>
